// Code generated by templ - DO NOT EDIT.

// templ: version: v0.3.977
package components

//lint:file-ignore SA4006 This context is only used if a nested component is present.

import "github.com/a-h/templ"
import templruntime "github.com/a-h/templ/runtime"

func scripts(treeData, nodesData, registeredTools string) templ.Component {
	return templruntime.GeneratedTemplate(func(templ_7745c5c3_Input templruntime.GeneratedComponentInput) (templ_7745c5c3_Err error) {
		templ_7745c5c3_W, ctx := templ_7745c5c3_Input.Writer, templ_7745c5c3_Input.Context
		if templ_7745c5c3_CtxErr := ctx.Err(); templ_7745c5c3_CtxErr != nil {
			return templ_7745c5c3_CtxErr
		}
		templ_7745c5c3_Buffer, templ_7745c5c3_IsBuffer := templruntime.GetBuffer(templ_7745c5c3_W)
		if !templ_7745c5c3_IsBuffer {
			defer func() {
				templ_7745c5c3_BufErr := templruntime.ReleaseBuffer(templ_7745c5c3_Buffer)
				if templ_7745c5c3_Err == nil {
					templ_7745c5c3_Err = templ_7745c5c3_BufErr
				}
			}()
		}
		ctx = templ.InitializeContext(ctx)
		templ_7745c5c3_Var1 := templ.GetChildren(ctx)
		if templ_7745c5c3_Var1 == nil {
			templ_7745c5c3_Var1 = templ.NopComponent
		}
		ctx = templ.ClearChildren(ctx)
		templ_7745c5c3_Err = templruntime.WriteString(templ_7745c5c3_Buffer, 1, "<script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script><script>\n\t\t{ treeData }\n\t\t{ nodesData }\n\t\t{ registeredTools }\n\t\t// Ensure registeredTools is always an object\n\t\tif (typeof registeredTools === 'undefined' || registeredTools === null) {\n\t\t\tregisteredTools = {};\n\t\t}\n\t</script><script>\n\t\tfunction calculateStats() {\n\t\t\tconst totalNodes = Object.keys(nodesData).length;\n\t\t\tlet totalTools = 0;\n\t\t\tlet maxDepth = 0;\n\n\t\t\tfunction countTools(node) {\n\t\t\t\tif (nodesData[node.path] && nodesData[node.path].tools) {\n\t\t\t\t\ttotalTools += nodesData[node.path].tools.length;\n\t\t\t\t}\n\t\t\t\tif (node.level > maxDepth) {\n\t\t\t\t\tmaxDepth = node.level;\n\t\t\t\t}\n\t\t\t\tif (node.children) {\n\t\t\t\t\tnode.children.forEach(countTools);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (treeData) {\n\t\t\t\tcountTools(treeData);\n\t\t\t}\n\n\t\t\tdocument.getElementById('total-nodes').textContent = totalNodes;\n\t\t\tdocument.getElementById('total-tools').textContent = totalTools;\n\t\t\tdocument.getElementById('tree-depth').textContent = maxDepth + 1;\n\t\t}\n\n\t\tfunction renderNode(node, isRoot = false) {\n\t\t\tconst nodeData = nodesData[node.path] || {};\n\t\t\tconst level = node.level || 0;\n\t\t\tconst indent = level * 30;\n\t\t\tconst hasChildren = node.children && node.children.length > 0;\n\t\t\tconst toggleStyle = hasChildren ? '' : 'visibility: hidden;';\n\n\t\t\tlet html = '<div class=\"tree-node\" data-path=\"' + escapeHtml(node.path) + '\" data-level=\"' + level + '\" style=\"margin-left: ' + indent + 'px;\">' +\n\t\t\t\t'<div class=\"node-header\">' +\n\t\t\t\t'<div>' +\n\t\t\t\t'<span class=\"toggle-icon\" id=\"toggle-' + escapeHtml(node.path) + '\" style=\"' + toggleStyle + '\" onclick=\"event.stopPropagation(); toggleNode(\\'' + escapeHtml(node.path) + '\\')\"></span>' +\n\t\t\t\t'<span class=\"level-indicator\">' + level + '</span>' +\n\t\t\t\t'<a href=\"#\" class=\"node-title-link\" onclick=\"event.preventDefault(); showNodeDetail(\\'' + escapeHtml(node.path) + '\\'); return false;\">' +\n\t\t\t\tescapeHtml(node.title || node.id || node.path) +\n\t\t\t\t'</a>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<span class=\"node-path\">' + escapeHtml(node.path) + '</span>' +\n\t\t\t\t'</div>';\n\n\t\t\tif (node.description || nodeData.description) {\n\t\t\t\thtml += '<div class=\"node-description\">' + escapeHtml(node.description || nodeData.description || '') + '</div>';\n\t\t\t}\n\n\t\t\thtml += '<div class=\"node-meta\">';\n\t\t\t\n\t\t\tif (nodeData.policy) {\n\t\t\t\tif (nodeData.policy.can_advance) {\n\t\t\t\t\thtml += '<span class=\"meta-item\"><span class=\"meta-badge\">Can Advance</span></span>';\n\t\t\t\t}\n\t\t\t\tif (nodeData.children && nodeData.children.length > 0) {\n\t\t\t\t\thtml += '<span class=\"meta-item\"><span class=\"meta-badge\">Children: ' + nodeData.children.length + '</span></span>';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (nodeData.tools && nodeData.tools.length > 0) {\n\t\t\t\thtml += '<span class=\"meta-item\">Tools: <strong>' + nodeData.tools.length + '</strong></span>';\n\t\t\t}\n\n\t\t\thtml += '</div>';\n\n\t\t\tif (nodeData.tools && nodeData.tools.length > 0) {\n\t\t\t\thtml += '<div class=\"tools-section\">';\n\t\t\t\thtml += '<div class=\"tools-title\" onclick=\"toggleTools(\\'' + escapeHtml(node.path) + '\\')\">' +\n\t\t\t\t\t'<span class=\"toggle-icon\" id=\"toggle-tools-' + escapeHtml(node.path) + '\"></span>' +\n\t\t\t\t\t'<span>üîß Tools (' + nodeData.tools.length + ')</span>' +\n\t\t\t\t\t'</div>';\n\t\t\t\thtml += '<div class=\"tools-content\" id=\"tools-content-' + escapeHtml(node.path) + '\">';\n\t\t\t\tnodeData.tools.forEach(function(tool) {\n\t\t\t\t\tconst isRegistered = registeredTools && typeof registeredTools === 'object' && registeredTools[tool.name] === true;\n\t\t\t\t\thtml += '<div class=\"tool-item\">' +\n\t\t\t\t\t\t'<div class=\"tool-name-row\">' +\n\t\t\t\t\t\t'<div class=\"tool-name\">' + escapeHtml(tool.name) + '</div>';\n\t\t\t\t\tif (isRegistered) {\n\t\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-registered\" title=\"This tool is registered in FunctionRegistry\">‚úì Registered</span>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-unregistered\" title=\"This tool is not registered in FunctionRegistry\">‚ö†Ô∏è Not Registered</span>';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '</div>' +\n\t\t\t\t\t\t'<div class=\"tool-description\">' + escapeHtml(tool.description || '') + '</div>' +\n\t\t\t\t\t\t'</div>';\n\t\t\t\t});\n\t\t\t\thtml += '</div></div>';\n\t\t\t}\n\n\t\t\tif (nodeData.content) {\n\t\t\t\tconst markdownHtml = marked.parse(nodeData.content);\n\t\t\t\thtml += '<details style=\"margin-top: 10px;\">' +\n\t\t\t\t\t'<summary style=\"cursor: pointer; color: #667eea; font-weight: bold;\">üìÑ Content Preview</summary>' +\n\t\t\t\t\t'<div style=\"margin-top: 10px;\">' +\n\t\t\t\t\t'<div class=\"button-group\">' +\n\t\t\t\t\t'<button class=\"markdown-toggle-btn\" onclick=\"toggleMarkdown(\\'content-preview-' + escapeHtml(node.path) + '\\')\">View as Plain Text</button>' +\n\t\t\t\t\t'<button class=\"copy-btn\" onclick=\"copyContent(\\'' + escapeHtml(node.path) + '\\', \\'preview\\')\">üìã Copy Content</button>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div id=\"content-preview-' + escapeHtml(node.path) + '\" data-content-path=\"' + escapeHtml(node.path) + '\" style=\"margin-top: 10px; padding: 10px; background: white; border-radius: 6px; font-size: 0.9em; color: #555;\" class=\"content-markdown\">' +\n\t\t\t\t\tmarkdownHtml +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</details>';\n\t\t\t}\n\n\t\t\thtml += '</div>';\n\n\t\t\tif (node.children && node.children.length > 0) {\n\t\t\t\thtml += '<div class=\"children\" id=\"children-' + escapeHtml(node.path) + '\">';\n\t\t\t\tnode.children.forEach(function(child) {\n\t\t\t\t\thtml += renderNode(child);\n\t\t\t\t});\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\n\t\t\treturn html;\n\t\t}\n\n\t\tfunction toggleNode(path) {\n\t\t\tconst childrenDiv = document.getElementById('children-' + path);\n\t\t\tconst toggleIcon = document.getElementById('toggle-' + path);\n\t\t\t\n\t\t\tif (!childrenDiv) return;\n\t\t\t\n\t\t\tif (childrenDiv.classList.contains('expanded')) {\n\t\t\t\tchildrenDiv.classList.remove('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.remove('expanded');\n\t\t\t} else {\n\t\t\t\tchildrenDiv.classList.add('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.add('expanded');\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleTools(path) {\n\t\t\tconst toolsContent = document.getElementById('tools-content-' + path);\n\t\t\tconst toggleIcon = document.getElementById('toggle-tools-' + path);\n\t\t\t\n\t\t\tif (!toolsContent) return;\n\t\t\t\n\t\t\tif (toolsContent.classList.contains('expanded')) {\n\t\t\t\ttoolsContent.classList.remove('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.remove('expanded');\n\t\t\t} else {\n\t\t\t\ttoolsContent.classList.add('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.add('expanded');\n\t\t\t}\n\t\t}\n\n\t\tfunction toggleChildren(path) {\n\t\t\tconst childrenContent = document.getElementById('children-content-' + path);\n\t\t\tconst toggleIcon = document.getElementById('toggle-children-' + path);\n\t\t\t\n\t\t\tif (!childrenContent) return;\n\t\t\t\n\t\t\tif (childrenContent.classList.contains('expanded')) {\n\t\t\t\tchildrenContent.classList.remove('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.remove('expanded');\n\t\t\t} else {\n\t\t\t\tchildrenContent.classList.add('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.add('expanded');\n\t\t\t}\n\t\t}\n\n\t\tfunction renderTree() {\n\t\t\tconst container = document.getElementById('tree-container');\n\t\t\tif (treeData) {\n\t\t\t\tcontainer.innerHTML = renderNode(treeData, true);\n\t\t\t} else {\n\t\t\t\tcontainer.innerHTML = '<p>No tree data available</p>';\n\t\t\t}\n\t\t\tcalculateStats();\n\t\t}\n\n\t\tfunction setupSearch() {\n\t\t\tconst searchInput = document.getElementById('search-input');\n\t\t\tsearchInput.addEventListener('input', function(e) {\n\t\t\t\tconst query = e.target.value.toLowerCase();\n\t\t\t\tconst nodes = document.querySelectorAll('.tree-node');\n\t\t\t\t\n\t\t\t\tnodes.forEach(function(node) {\n\t\t\t\t\tconst path = node.getAttribute('data-path');\n\t\t\t\t\tconst nodeData = nodesData[path] || {};\n\t\t\t\t\tconst toolText = (nodeData.tools || []).map(function(t) { return t.name + ' ' + t.description; }).join(' ');\n\t\t\t\t\tconst text = (nodeData.title || '') + ' ' + (nodeData.description || '') + ' ' + path + ' ' + toolText;\n\t\t\t\t\tconst lowerText = text.toLowerCase();\n\t\t\t\t\t\n\t\t\t\t\tif (lowerText.includes(query)) {\n\t\t\t\t\t\tnode.style.display = '';\n\t\t\t\t\t\tlet current = node.parentElement;\n\t\t\t\t\t\twhile (current) {\n\t\t\t\t\t\t\tif (current.classList.contains('children')) {\n\t\t\t\t\t\t\t\tcurrent.style.display = '';\n\t\t\t\t\t\t\t\tcurrent.classList.add('expanded');\n\t\t\t\t\t\t\t\tconst parentNode = current.parentElement;\n\t\t\t\t\t\t\t\tif (parentNode && parentNode.classList.contains('tree-node')) {\n\t\t\t\t\t\t\t\t\tconst parentPath = parentNode.getAttribute('data-path');\n\t\t\t\t\t\t\t\t\tconst toggleIcon = document.getElementById('toggle-' + parentPath);\n\t\t\t\t\t\t\t\t\tif (toggleIcon) toggleIcon.classList.add('expanded');\n\t\t\t\t\t\t\t\t\tcurrent = parentNode.parentElement;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcurrent = current.parentElement;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tfunction escapeHtml(text) {\n\t\t\tconst div = document.createElement('div');\n\t\t\tdiv.textContent = text;\n\t\t\treturn div.innerHTML;\n\t\t}\n\n\t\tfunction toggleMarkdown(elementId) {\n\t\t\tconst element = document.getElementById(elementId);\n\t\t\tif (!element) return;\n\n\t\t\tconst button = element.previousElementSibling;\n\t\t\tif (!button || !button.classList.contains('markdown-toggle-btn')) {\n\t\t\t\tconst parent = element.parentElement;\n\t\t\t\tconst btn = parent.querySelector('.markdown-toggle-btn');\n\t\t\t\tif (btn) {\n\t\t\t\t\ttoggleMarkdownForElement(element, btn);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoggleMarkdownForElement(element, button);\n\t\t}\n\n\t\tfunction toggleMarkdownForElement(element, button) {\n\t\t\t// Get the path from data attribute to access original content from nodesData\n\t\t\tconst contentPath = element.getAttribute('data-content-path');\n\t\t\tif (!contentPath) return;\n\n\t\t\t// Always get the original content from nodesData (source of truth)\n\t\t\tconst nodeData = nodesData[contentPath];\n\t\t\tif (!nodeData || !nodeData.content) return;\n\n\t\t\tconst originalMarkdown = nodeData.content;\n\n\t\t\tif (element.classList.contains('content-plain')) {\n\t\t\t\t// Switch from plain text to markdown\n\t\t\t\tconst markdownHtml = marked.parse(originalMarkdown);\n\t\t\t\telement.innerHTML = markdownHtml;\n\t\t\t\telement.classList.remove('content-plain');\n\t\t\t\telement.classList.add('content-markdown');\n\t\t\t\tbutton.textContent = 'View as Plain Text';\n\t\t\t} else {\n\t\t\t\t// Switch from markdown to plain text\n\t\t\t\telement.textContent = originalMarkdown;\n\t\t\t\telement.classList.remove('content-markdown');\n\t\t\t\telement.classList.add('content-plain');\n\t\t\t\tbutton.textContent = 'View as Markdown';\n\t\t\t}\n\t\t}\n\n\t\tfunction copyContent(path, type) {\n\t\t\tconst nodeData = nodesData[path];\n\t\t\tif (!nodeData || !nodeData.content) return;\n\n\t\t\tconst content = nodeData.content;\n\t\t\t\n\t\t\tif (navigator.clipboard && navigator.clipboard.writeText) {\n\t\t\t\tnavigator.clipboard.writeText(content).then(function() {\n\t\t\t\t\tshowCopyFeedback(path, type);\n\t\t\t\t}).catch(function(err) {\n\t\t\t\t\tconsole.error('Failed to copy:', err);\n\t\t\t\t\tfallbackCopyTextToClipboard(content, path, type);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfallbackCopyTextToClipboard(content, path, type);\n\t\t\t}\n\t\t}\n\n\t\tfunction fallbackCopyTextToClipboard(text, path, type) {\n\t\t\tconst textArea = document.createElement('textarea');\n\t\t\ttextArea.value = text;\n\t\t\ttextArea.style.position = 'fixed';\n\t\t\ttextArea.style.left = '-999999px';\n\t\t\ttextArea.style.top = '-999999px';\n\t\t\tdocument.body.appendChild(textArea);\n\t\t\ttextArea.focus();\n\t\t\ttextArea.select();\n\t\t\t\n\t\t\ttry {\n\t\t\t\tconst successful = document.execCommand('copy');\n\t\t\t\tif (successful) {\n\t\t\t\t\tshowCopyFeedback(path, type);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Fallback copy failed:', err);\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeChild(textArea);\n\t\t}\n\n\t\tfunction showCopyFeedback(path, type) {\n\t\t\tconst buttons = document.querySelectorAll('.copy-btn');\n\t\t\tbuttons.forEach(function(btn) {\n\t\t\t\tif (btn.getAttribute('onclick') && btn.getAttribute('onclick').indexOf(path) !== -1 && btn.getAttribute('onclick').indexOf(type) !== -1) {\n\t\t\t\t\tconst originalText = btn.textContent;\n\t\t\t\t\tbtn.textContent = '‚úì Copied!';\n\t\t\t\t\tbtn.style.background = '#28a745';\n\t\t\t\t\t\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\tbtn.textContent = originalText;\n\t\t\t\t\t\tbtn.style.background = '';\n\t\t\t\t\t}, 2000);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction showNodeDetail(path) {\n\t\t\tconst nodeData = nodesData[path];\n\t\t\tif (!nodeData) return;\n\n\t\t\tconst treeView = document.getElementById('tree-view');\n\t\t\tconst detailView = document.getElementById('detail-view');\n\t\t\tconst toolsView = document.getElementById('tools-view');\n\t\t\tconst detailContent = document.getElementById('detail-content');\n\n\t\t\ttreeView.classList.add('hidden');\n\t\t\tdetailView.classList.add('active');\n\t\t\tif (toolsView) toolsView.classList.remove('active');\n\n\t\t\tlet html = '';\n\n\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t'<div class=\"detail-section-title\">' + escapeHtml(nodeData.title || nodeData.id || path) + '</div>' +\n\t\t\t\t'<div class=\"detail-field\">' +\n\t\t\t\t'<div class=\"detail-field-label\">Path:</div>' +\n\t\t\t\t'<div class=\"detail-field-value\"><code>' + escapeHtml(path) + '</code></div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'<div class=\"detail-field\">' +\n\t\t\t\t'<div class=\"detail-field-label\">ID:</div>' +\n\t\t\t\t'<div class=\"detail-field-value\"><code>' + escapeHtml(nodeData.id || 'N/A') + '</code></div>' +\n\t\t\t\t'</div>' +\n\t\t\t\t'</div>';\n\n\t\t\tif (nodeData.description) {\n\t\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t\t'<div class=\"detail-section-title\">Description</div>' +\n\t\t\t\t\t'<div class=\"detail-field-value\">' + escapeHtml(nodeData.description) + '</div>' +\n\t\t\t\t\t'</div>';\n\t\t\t}\n\n\t\t\tif (nodeData.content) {\n\t\t\t\tconst markdownHtml = marked.parse(nodeData.content);\n\t\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t\t'<div class=\"detail-section-title\">Content</div>' +\n\t\t\t\t\t'<div class=\"button-group\">' +\n\t\t\t\t\t'<button class=\"markdown-toggle-btn\" onclick=\"toggleMarkdown(\\'content-detail-' + path + '\\')\">View as Plain Text</button>' +\n\t\t\t\t\t'<button class=\"copy-btn\" onclick=\"copyContent(\\'' + path + '\\', \\'detail\\')\">üìã Copy Content</button>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div id=\"content-detail-' + path + '\" data-content-path=\"' + path + '\" class=\"detail-field-value content-markdown\" style=\"margin-top: 10px;\">' +\n\t\t\t\t\tmarkdownHtml +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'</div>';\n\t\t\t}\n\n\t\t\tif (nodeData.auth && nodeData.auth.users && nodeData.auth.users.length > 0) {\n\t\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t\t'<div class=\"detail-section-title\">Auth</div>';\n\t\t\t\t\n\t\t\t\tnodeData.auth.users.forEach(function(user) {\n\t\t\t\t\thtml += '<div class=\"detail-field\" style=\"margin-bottom: 15px; padding: 10px; background-color: #f9f9f9; border-radius: 4px;\">' +\n\t\t\t\t\t\t'<div class=\"detail-field-label\" style=\"font-weight: bold; margin-bottom: 5px;\">User: ' + escapeHtml(user.user_id) + '</div>' +\n\t\t\t\t\t\t'<div class=\"detail-field-value\" style=\"display: grid; grid-template-columns: repeat(2, 1fr); gap: 5px;\">' +\n\t\t\t\t\t\t'<div>Can Edit: ' + (user.can_edit ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'<div>Can Read: ' + (user.can_read ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'<div>Can Access Next: ' + (user.can_access_next ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'<div>Can See: ' + (user.can_see ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'<div>Visible in Docs: ' + (user.visible_in_docs ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'<div>Visible in Graph: ' + (user.visible_in_graph ? 'Yes' : 'No') + '</div>' +\n\t\t\t\t\t\t'</div>' +\n\t\t\t\t\t\t'</div>';\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\thtml += '</div>';\n\t\t\t}\n\n\t\t\tif (nodeData.children && nodeData.children.length > 0) {\n\t\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t\t'<div class=\"children-section\">' +\n\t\t\t\t\t'<div class=\"children-title\" onclick=\"toggleChildren(\\'' + path + '\\')\">' +\n\t\t\t\t\t'<span class=\"toggle-icon\" id=\"toggle-children-' + path + '\"></span>' +\n\t\t\t\t\t'<span>üë∂ Children Nodes (' + nodeData.children.length + ')</span>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"children-content\" id=\"children-content-' + path + '\">' +\n\t\t\t\t\t'<div class=\"detail-field-value\"><ul class=\"children-list\">';\n\t\t\t\tnodeData.children.forEach(function(childPath) {\n\t\t\t\t\tconst childData = nodesData[childPath];\n\t\t\t\t\tconst childTitle = childData ? (childData.title || childData.id || childPath) : childPath;\n\t\t\t\t\thtml += '<li class=\"children-list-item\">' +\n\t\t\t\t\t\t'<a href=\"#\" onclick=\"event.preventDefault(); showNodeDetail(\\'' + childPath + '\\'); return false;\">' +\n\t\t\t\t\t\tescapeHtml(childTitle) + ' <span style=\"color: #6c757d; font-size: 0.9em;\">(' + escapeHtml(childPath) + ')</span>' +\n\t\t\t\t\t\t'</a>' +\n\t\t\t\t\t\t'</li>';\n\t\t\t\t});\n\t\t\t\thtml += '</ul></div></div></div></div>';\n\t\t\t}\n\n\t\t\tif (nodeData.tools && nodeData.tools.length > 0) {\n\t\t\t\thtml += '<div class=\"detail-section\">' +\n\t\t\t\t\t'<div class=\"tools-section\">' +\n\t\t\t\t\t'<div class=\"tools-title\" onclick=\"toggleTools(\\'' + path + '\\')\">' +\n\t\t\t\t\t'<span class=\"toggle-icon\" id=\"toggle-tools-' + path + '\"></span>' +\n\t\t\t\t\t'<span>üîß Tools (' + nodeData.tools.length + ')</span>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t\t'<div class=\"tools-content\" id=\"tools-content-' + path + '\">';\n\t\t\t\t\n\t\t\t\tnodeData.tools.forEach(function(tool, index) {\n\t\t\t\t\tconst isRegistered = registeredTools && typeof registeredTools === 'object' && registeredTools[tool.name] === true;\n\t\t\t\t\thtml += '<div class=\"detail-field\" style=\"margin-bottom: 12px;\">' +\n\t\t\t\t\t\t'<div class=\"detail-field-label\" style=\"display: flex; align-items: center; gap: 10px;\">' +\n\t\t\t\t\t\t'<span>' + (index + 1) + '. ' + escapeHtml(tool.name) + '</span>';\n\t\t\t\t\tif (isRegistered) {\n\t\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-registered\" title=\"This tool is registered in FunctionRegistry\">‚úì Registered</span>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-unregistered\" title=\"This tool is not registered in FunctionRegistry\">‚ö†Ô∏è Not Registered</span>';\n\t\t\t\t\t}\n\t\t\t\t\thtml += '</div>' +\n\t\t\t\t\t\t'<div class=\"detail-field-value\">' +\n\t\t\t\t\t\t'<div style=\"margin-bottom: 6px;\"><strong>Description:</strong> ' + escapeHtml(tool.description || 'N/A') + '</div>';\n\t\t\t\t\t\n\t\t\t\t\tif (tool.status) {\n\t\t\t\t\t\thtml += '<div style=\"margin-bottom: 6px;\"><strong>Status:</strong> <code>' + escapeHtml(tool.status) + '</code></div>';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (tool.input_schema) {\n\t\t\t\t\t\thtml += '<div><strong>Input Schema:</strong>' +\n\t\t\t\t\t\t\t'<pre class=\"json-viewer\">' + JSON.stringify(tool.input_schema, null, 2) + '</pre>' +\n\t\t\t\t\t\t\t'</div>';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\thtml += '</div></div>';\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\thtml += '</div></div></div>';\n\t\t\t}\n\n\t\t\tdetailContent.innerHTML = html;\n\t\t\twindow.location.hash = 'node-' + encodeURIComponent(path);\n\t\t}\n\n\t\tfunction showTreeView() {\n\t\t\tconst treeView = document.getElementById('tree-view');\n\t\t\tconst detailView = document.getElementById('detail-view');\n\t\t\tconst toolsView = document.getElementById('tools-view');\n\n\t\t\ttreeView.classList.remove('hidden');\n\t\t\tdetailView.classList.remove('active');\n\t\t\tif (toolsView) toolsView.classList.remove('active');\n\t\t\twindow.location.hash = '';\n\t\t}\n\n\t\tfunction showAllTools() {\n\t\t\tconst treeView = document.getElementById('tree-view');\n\t\t\tconst detailView = document.getElementById('detail-view');\n\t\t\tconst toolsView = document.getElementById('tools-view');\n\n\t\t\ttreeView.classList.add('hidden');\n\t\t\tdetailView.classList.remove('active');\n\t\t\tif (toolsView) {\n\t\t\t\ttoolsView.classList.add('active');\n\t\t\t\trenderAllTools();\n\t\t\t}\n\t\t\twindow.location.hash = '#tools';\n\t\t}\n\n\t\tfunction renderAllTools() {\n\t\t\tconst container = document.getElementById('tools-list-container');\n\t\t\tif (!container) return;\n\n\t\t\t// Collect all tools from all nodes\n\t\t\tconst allTools = [];\n\t\t\tconst toolMap = new Map(); // To deduplicate tools by name\n\n\t\t\tfor (const path in nodesData) {\n\t\t\t\tconst nodeData = nodesData[path];\n\t\t\t\tif (nodeData.tools && nodeData.tools.length > 0) {\n\t\t\t\t\tnodeData.tools.forEach(function(tool) {\n\t\t\t\t\t\t// Use tool name as key to deduplicate\n\t\t\t\t\t\tif (!toolMap.has(tool.name)) {\n\t\t\t\t\t\t\ttoolMap.set(tool.name, {\n\t\t\t\t\t\t\t\ttool: tool,\n\t\t\t\t\t\t\t\tnodes: []\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst entry = toolMap.get(tool.name);\n\t\t\t\t\t\tentry.nodes.push({\n\t\t\t\t\t\t\tpath: path,\n\t\t\t\t\t\t\ttitle: nodeData.title || nodeData.id || path\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Convert map to array and sort by tool name\n\t\t\tconst toolsArray = Array.from(toolMap.values()).sort(function(a, b) {\n\t\t\t\treturn a.tool.name.localeCompare(b.tool.name);\n\t\t\t});\n\n\t\t\tif (toolsArray.length === 0) {\n\t\t\t\tcontainer.innerHTML = '<div class=\"no-tools\">No tools found in the knowledge tree.</div>';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet html = '<div class=\"tools-summary\">Total: <strong>' + toolsArray.length + '</strong> unique tools</div>';\n\t\t\thtml += '<div class=\"tools-grid\">';\n\n\t\t\ttoolsArray.forEach(function(entry, index) {\n\t\t\t\tconst tool = entry.tool;\n\t\t\t\tconst statusClass = tool.status === 'active' ? 'status-active' : \n\t\t\t\t\t\t\t\t\ttool.status === 'disabled' ? 'status-disabled' : \n\t\t\t\t\t\t\t\t\ttool.status === 'hidden' ? 'status-hidden' : 'status-unknown';\n\t\t\t\tconst isRegistered = registeredTools && typeof registeredTools === 'object' && registeredTools[tool.name] === true;\n\t\t\t\t\n\t\t\t\thtml += '<div class=\"tool-card\">';\n\t\t\t\thtml += '<div class=\"tool-card-header\">';\n\t\t\t\thtml += '<div class=\"tool-name-large\">' + escapeHtml(tool.name) + '</div>';\n\t\t\t\thtml += '<div style=\"display: flex; gap: 8px; align-items: center; flex-wrap: wrap;\">';\n\t\t\t\thtml += '<span class=\"tool-status ' + statusClass + '\">' + escapeHtml(tool.status || 'unknown') + '</span>';\n\t\t\t\tif (isRegistered) {\n\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-registered\" title=\"This tool is registered in FunctionRegistry\">‚úì Registered</span>';\n\t\t\t\t} else {\n\t\t\t\t\thtml += '<span class=\"tool-badge tool-badge-unregistered\" title=\"This tool is not registered in FunctionRegistry\">‚ö†Ô∏è Not Registered</span>';\n\t\t\t\t}\n\t\t\t\thtml += '</div>';\n\t\t\t\thtml += '</div>';\n\t\t\t\t\n\t\t\t\tif (tool.description) {\n\t\t\t\t\thtml += '<div class=\"tool-description-full\">' + escapeHtml(tool.description) + '</div>';\n\t\t\t\t}\n\n\t\t\t\tif (tool.input_schema) {\n\t\t\t\t\thtml += '<div class=\"tool-schema-section\">';\n\t\t\t\t\thtml += '<div class=\"tool-schema-title\" onclick=\"toggleSchema(\\'schema-' + index + '\\')\">';\n\t\t\t\t\thtml += '<span class=\"toggle-icon\" id=\"toggle-schema-' + index + '\"></span>';\n\t\t\t\t\thtml += '<span>üìã Input Schema</span>';\n\t\t\t\t\thtml += '</div>';\n\t\t\t\t\thtml += '<div class=\"tool-schema-content\" id=\"schema-' + index + '\">';\n\t\t\t\t\thtml += '<pre class=\"json-viewer\">' + JSON.stringify(tool.input_schema, null, 2) + '</pre>';\n\t\t\t\t\thtml += '</div>';\n\t\t\t\t\thtml += '</div>';\n\t\t\t\t}\n\n\t\t\t\tif (entry.nodes.length > 0) {\n\t\t\t\t\thtml += '<div class=\"tool-nodes-section\">';\n\t\t\t\t\thtml += '<div class=\"tool-nodes-title\">üìç Available in ' + entry.nodes.length + ' node(s):</div>';\n\t\t\t\t\thtml += '<ul class=\"tool-nodes-list\">';\n\t\t\t\t\tentry.nodes.forEach(function(node) {\n\t\t\t\t\t\thtml += '<li><a href=\"#\" onclick=\"event.preventDefault(); showNodeDetail(\\'' + escapeHtml(node.path) + '\\'); return false;\">' + \n\t\t\t\t\t\t\t\tescapeHtml(node.title) + ' <span class=\"node-path-small\">(' + escapeHtml(node.path) + ')</span></a></li>';\n\t\t\t\t\t});\n\t\t\t\t\thtml += '</ul>';\n\t\t\t\t\thtml += '</div>';\n\t\t\t\t}\n\n\t\t\t\thtml += '</div>';\n\t\t\t});\n\n\t\t\thtml += '</div>';\n\t\t\tcontainer.innerHTML = html;\n\t\t}\n\n\t\tfunction toggleSchema(schemaId) {\n\t\t\tconst schemaContent = document.getElementById(schemaId);\n\t\t\tconst toggleIcon = document.getElementById('toggle-' + schemaId);\n\t\t\t\n\t\t\tif (!schemaContent) return;\n\t\t\t\n\t\t\tif (schemaContent.classList.contains('expanded')) {\n\t\t\t\tschemaContent.classList.remove('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.remove('expanded');\n\t\t\t} else {\n\t\t\t\tschemaContent.classList.add('expanded');\n\t\t\t\tif (toggleIcon) toggleIcon.classList.add('expanded');\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('hashchange', function() {\n\t\t\tconst hash = window.location.hash;\n\t\t\tif (hash === '#tools') {\n\t\t\t\tshowAllTools();\n\t\t\t} else if (hash && hash.startsWith('#node-')) {\n\t\t\t\tconst path = decodeURIComponent(hash.substring(6));\n\t\t\t\tshowNodeDetail(path);\n\t\t\t} else {\n\t\t\t\tshowTreeView();\n\t\t\t}\n\t\t});\n\n\t\trenderTree();\n\t\tsetupSearch();\n\t\t\n\t\tif (window.location.hash === '#tools') {\n\t\t\tshowAllTools();\n\t\t} else if (window.location.hash && window.location.hash.startsWith('#node-')) {\n\t\t\tconst path = decodeURIComponent(window.location.hash.substring(6));\n\t\t\tshowNodeDetail(path);\n\t\t}\n\t</script>")
		if templ_7745c5c3_Err != nil {
			return templ_7745c5c3_Err
		}
		return nil
	})
}

var _ = templruntime.GeneratedTemplate
